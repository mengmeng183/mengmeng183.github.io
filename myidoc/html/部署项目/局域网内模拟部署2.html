<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MengMeng</title>
        
    <link rel="stylesheet" type="text/css" href="../../static/css/main.css">
</head>
<body>
<div class="navbar navbar-line">
    <div class="container">
        <div class="logo">
            
                MengMeng
            
        </div>
        <input type="checkbox" id="idoc_nav" />
        <div class="menu_tree">
        <ul><li><a href="../../index.html">首页</a></li><li><a href="#"><span></span>React专题</a><ul><li><a href="../../html/React专题/React基础知识.html">React基础知识</a></li><li><a href="../../html/React专题/React-router路由.html">React-router路由</a></li></ul></li><li><a href="#"><span></span>数据库</a><ul><li><a href="../../html/数据库/mongoose.html">mongoose</a></li><li><a href="../../html/数据库/mongodb数据库.html">mongodb数据库</a></li><li><a href="../../html/数据库/客户端操作数据库1.html">客户端操作数据库1</a></li><li><a href="../../html/数据库/客户端操作数据库2.html">客户端操作数据库2</a></li><li><a href="../../html/数据库/客户端操作数据库3.html">客户端操作数据库3</a></li></ul></li><li><a href="#"><span></span>部署项目</a><ul><li><a href="../../html/部署项目/部署项目.html">部署项目</a></li><li><a href="../../html/部署项目/局域网内模拟部署1.html">局域网内模拟部署1</a></li><li class="active"><a href="../../html/部署项目/局域网内模拟部署2.html">局域网内模拟部署2</a></li></ul></li><li><a href="#"><span></span>Nodejs基础</a><ul><li><a href="../../html/Nodejs基础/HTTP基础知识.html">HTTP基础知识</a></li><li><a href="../../html/Nodejs基础/Nodejs模块.html">Nodejs模块</a></li><li><a href="../../html/Nodejs基础/QueryString.html">QueryString</a></li><li><a href="../../html/Nodejs基础/URL.html">URL</a></li><li><a href="../../html/Nodejs基础/命令行中体验nodejs.html">命令行中体验nodejs</a></li><li><a href="../../html/Nodejs基础/起一个web服务器.html">起一个web服务器</a></li></ul></li><li><a href="#"><span></span>express</a><ul><li><a href="../../html/express/Express.html">Express</a></li></ul></li><li><a href="#"><span></span>基础知识</a><ul><li><a href="../../html/基础知识/ES6快速入门.html">ES6快速入门</a></li><li><a href="../../html/基础知识/Linux显示Git分支.html">Linux显示Git分支</a></li><li><a href="../../html/基础知识/Markdown.html">Markdown</a></li><li><a href="../../html/基础知识/NPM使用方法.html">NPM使用方法</a></li><li><a href="../../html/基础知识/Nodejs安装配置.html">Nodejs安装配置</a></li><li><a href="../../html/基础知识/bootstrap.html">bootstrap</a></li><li><a href="../../html/基础知识/material-ui.html">material-ui</a></li><li><a href="../../html/基础知识/webpack基础.html">webpack基础</a></li><li><a href="../../html/基础知识/基本shell命令使用.html">基本shell命令使用</a></li><li><a href="../../html/基础知识/Git和Github手册.html">Git和Github手册</a></li></ul></li></ul>    
        </div>
        
        
        <div class="forkgithub"><a target="_blank" href="https://mengmeng183.github.io">fork on github</a></div>
        

        <section class="idoc_nav_btn">
            <label for="idoc_nav"><span></span></label>
        </section>
    </div>
    
</div>




<div class="container">

    <div class="page-toc">
        <ul><li><a href="#t0项目部署：典型的 nodejs 全栈项目">项目部署：典型的 nodejs 全栈项目</a><ul><li><a href="#t1Google 的设计规范">Google 的设计规范</a></li><li><a href="#t2申请 aliyun 服务器">申请 aliyun 服务器</a></li><li><a href="#t3绑定域名 DNS">绑定域名 DNS</a></li><li><a href="#t4从 github clone 代码到服务器">从 github clone 代码到服务器</a></li><li><a href="#t5安 nodejs">安 nodejs</a></li><li><a href="#t6开始部署client">开始部署client</a></li><li><a href="#t7重新映射端口">重新映射端口</a></li><li><a href="#t8使用tmux">使用tmux</a></li></ul></li><li><a href="#t9链接前后端">链接前后端</a><ul><li><a href="#t10大功告成">大功告成</a></li></ul></li></ul>
    </div>
    
    <div class="content markdown-body">
        <h1 id="t0&#x9879;&#x76EE;&#x90E8;&#x7F72;&#xFF1A;&#x5178;&#x578B;&#x7684; nodejs &#x5168;&#x6808;&#x9879;&#x76EE;">&#x9879;&#x76EE;&#x90E8;&#x7F72;&#xFF1A;&#x5178;&#x578B;&#x7684; nodejs &#x5168;&#x6808;&#x9879;&#x76EE; <a href="#t0&#x9879;&#x76EE;&#x90E8;&#x7F72;&#xFF1A;&#x5178;&#x578B;&#x7684; nodejs &#x5168;&#x6808;&#x9879;&#x76EE;"> # </a></h1>
<h3 id="t1Google &#x7684;&#x8BBE;&#x8BA1;&#x89C4;&#x8303;">Google &#x7684;&#x8BBE;&#x8BA1;&#x89C4;&#x8303; <a href="#t1Google &#x7684;&#x8BBE;&#x8BA1;&#x89C4;&#x8303;"> # </a></h3>
<ul>
<li>materialup.com</li>
</ul>
<h3 id="t2&#x7533;&#x8BF7; aliyun &#x670D;&#x52A1;&#x5668;">&#x7533;&#x8BF7; aliyun &#x670D;&#x52A1;&#x5668; <a href="#t2&#x7533;&#x8BF7; aliyun &#x670D;&#x52A1;&#x5668;"> # </a></h3>
<p>&#x56FD;&#x5916;&#x8FD8;&#x6709; AWS &#x53EF;&#x4EE5;&#x7528;&#x3002;</p>
<p>&#x767B;&#x9646;</p>
<pre><code>ssh root@139.196.28.83
</code></pre><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x666E;&#x901A;&#x7528;&#x6237;</p>
<pre><code>adduser peter --ingroup sudo
</code></pre><p>&#x5207;&#x6362;&#x5230;&#x666E;&#x901A;&#x7528;&#x6237;</p>
<pre><code>su peter
</code></pre><p>&#x9000;&#x51FA;&#x767B;&#x9646;</p>
<p>Ctrl-D</p>
<h3 id="t3&#x7ED1;&#x5B9A;&#x57DF;&#x540D; DNS">&#x7ED1;&#x5B9A;&#x57DF;&#x540D; DNS <a href="#t3&#x7ED1;&#x5B9A;&#x57DF;&#x540D; DNS"> # </a></h3>
<p><a href="http://godaddy.com/">http://godaddy.com/</a> &#x4E0A;&#x53EF;&#x4EE5;&#x4E70;&#x5230;&#x57DF;&#x540D;&#x3002;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x6A21;&#x62DF;&#x4E00;&#x4E0B;&#x672C;&#x5730;&#x57DF;&#x540D;</p>
<pre><code>sudo vim /etc/hosts
</code></pre><p>&#x586B;&#x5199;</p>
<pre><code>139.196.28.83 peter.com
</code></pre><h3 id="t4&#x4ECE; github clone &#x4EE3;&#x7801;&#x5230;&#x670D;&#x52A1;&#x5668;">&#x4ECE; github clone &#x4EE3;&#x7801;&#x5230;&#x670D;&#x52A1;&#x5668; <a href="#t4&#x4ECE; github clone &#x4EE3;&#x7801;&#x5230;&#x670D;&#x52A1;&#x5668;"> # </a></h3>
<p>&#x5B89;&#x88C5; git</p>
<pre><code>sudo apt-get install git
</code></pre><pre><code>git clone xxx.git
</code></pre><h3 id="t5&#x5B89; nodejs">&#x5B89; nodejs <a href="#t5&#x5B89; nodejs"> # </a></h3>
<p>&#x4F7F;&#x7528; nvm &#x6765;&#x5B89;&#x88C5;</p>
<p>&#x5B89;&#x88C5; curl</p>
<pre><code>sudo apt-get update
sudo apt-get install -y curl
</code></pre><p>&#x8FD0;&#x884C;&#x5B89;&#x88C5; nvm &#x7684;&#x811A;&#x672C;</p>
<pre><code>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.29.0/install.sh | bash
</code></pre><p>&#x91CD;&#x65B0;&#x52A0;&#x8F7D; nvm</p>
<pre><code>source .bashrc
</code></pre><p>&#x5217;&#x51FA;&#x6240;&#x6709;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x7684; node &#x7248;&#x672C;</p>
<pre><code>nvm ls-remote
</code></pre><p>&#x6267;&#x884C;&#x5B89;&#x88C5;&#x547D;&#x4EE4;</p>
<pre><code>nvm install v6.8.0
</code></pre><p>&#x5217;&#x51FA;&#x6240;&#x6709;&#x7CFB;&#x7EDF;&#x4E0A;&#x7684; node &#x7248;&#x672C;</p>
<pre><code>nvm ls
</code></pre><h3 id="t6&#x5F00;&#x59CB;&#x90E8;&#x7F72;client">&#x5F00;&#x59CB;&#x90E8;&#x7F72;client <a href="#t6&#x5F00;&#x59CB;&#x90E8;&#x7F72;client"> # </a></h3>
<p>&#x5B89;&#x88C5;&#x6240;&#x6709;&#x4F9D;&#x8D56;&#x5305;</p>
<pre><code>cd digicity-express-api/client
npm install //&#x7528;cnpm&#x4F1A;&#x66F4;&#x5FEB;&#x4E9B;
</code></pre><h3 id="t7&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x7AEF;&#x53E3;">&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x7AEF;&#x53E3; <a href="#t7&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x7AEF;&#x53E3;"> # </a></h3>
<pre><code>npm run build # &#x5F97;&#x5230; bundle.js
</code></pre><p>&#x73B0;&#x5728;&#x9700;&#x8981;&#x542F;&#x52A8; server.js</p>
<pre><code>mkdir public
cd public
mv ../dist/bundle.js .
mv ../index.html # &#x4FEE;&#x6539;&#x91CC;&#x9762;&#x7684; bundle.js &#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x6539;&#x4E3A;`./bundle.js`
</code></pre><pre><code>node server.js
</code></pre><p>&#x73B0;&#x5728;&#x9700;&#x8981;&#x628A; 8000 &#x7AEF;&#x53E3;&#xFF0C;&#x6620;&#x5C04;&#x5230; 80&#xFF08;80&#x7AEF;&#x53E3;&#x662F; http &#x670D;&#x52A1;&#x7684;&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#xFF0C;&#x901A;&#x5E38;&#x90FD;&#x662F;&#x9ED8;&#x8BA4;&#x6253;&#x5F00;&#x7684;&#xFF09;</p>
<p>&#x9996;&#x5148;&#x5B89;&#x88C5; nginx &#x670D;&#x52A1;&#x5668;</p>
<pre><code>sudo apt-get install -y nginx
</code></pre><p>&#x5148;&#x5220;&#x9664; default &#x9875;&#x9762;</p>
<pre><code>cd /etc/nginx/site_enabled/
sudo rm default
</code></pre><p>&#x4F7F;&#x7528; vim &#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<pre><code>sudo vim client.conf
</code></pre><p>&#x586B;&#x5199;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>server {
    listen     80 default;
    server_name client.haoqicat.com;

    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Host $http_x_forwarded_host;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;upgrade&quot;;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_read_timeout 3m;
        proxy_send_timeout 3m;
    }
}
</code></pre><p>&#x91CD;&#x542F; nginx</p>
<pre><code>sudo service nginx reload
</code></pre><p>&#x73B0;&#x5728;client&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x8DD1;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x81EA;&#x5DF1;&#x7684;&#x7B14;&#x8BB0;&#x672C;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x4E00;&#x5173;&#x95ED;&#xFF0C;&#x90A3;&#x4E48;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x6B7B;&#x6389;&#x4E86;&#xFF0C;&#x8FD9;&#x4E2A;&#x600E;&#x4E48;&#x6765;&#x89E3;&#x51B3;&#x5462;&#xFF1F;</p>
<p>&#x6240;&#x4EE5;&#x8BF4;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x9700;&#x8981;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#x6765;&#x7EF4;&#x6301;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x4E0D;&#x6B7B;</p>
<h3 id="t8&#x4F7F;&#x7528;tmux">&#x4F7F;&#x7528;tmux <a href="#t8&#x4F7F;&#x7528;tmux"> # </a></h3>
<p>&#x5B89;&#x88C5;</p>
<pre><code>sudo apt-get install tmux
</code></pre><p>&#x4F7F;&#x7528;&#x5C31;&#x662F;</p>
<pre><code>tmux
</code></pre><p>&#x7136;&#x540E;&#x5728; tmux &#x4E4B;&#x4E2D;&#x6253;&#x5F00;&#x7684;&#x547D;&#x4EE4;&#x884C;&#xFF0C;&#x5C31;&#x4E0D;&#x4F1A;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5173;&#x95ED;&#x800C;&#x6B7B;&#x6389;&#x4E86;&#xFF0E;</p>
<p>&#x518D;&#x6B21;&#x767B;&#x5F55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6267;&#x884C;</p>
<pre><code>tmux a
# &#x9000;&#x51FA; tmux &#x91C7;&#x7528; ctrl&#xFF0B;A&#xFF0B;D/ctrl&#xFF0B;B&#xFF0B;D
</code></pre><p>&#x5C31;&#x53EF;&#x4EE5;&#x518D;&#x6B21;&#x770B;&#x5230;&#x90A3;&#x4E2A;&#x547D;&#x4EE4;&#x884C;&#x4E86;&#x3002;<a href="http://haoduoshipin.com/v/41">&#x53C2;&#x8003;&#x8D44;&#x6599;</a></p>
<p>###&#x3000;&#x90E8;&#x7F72;server
&#x73B0;&#x5728;&#x767B;&#x5F55;&#x5230;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x518D;&#x6765;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x3000;tmux&#x3000;&#x7684;&#x4F1A;&#x8BDD;</p>
<p>ctrl&#xFF0B;A&#xFF0B;D/ctrl&#xFF0B;B&#xFF0B;D</p>
<p>&#x7136;&#x540E;&#x5728;&#x65B0;&#x4F1A;&#x8BDD;&#x4E2D;&#x542F;&#x52A8;&#x3000;server &#x4EE3;&#x7801;&#x3000;</p>
<pre><code>cd ~/digicity-express-api/server
npm install
node index.js //&#x63D0;&#x524D;&#x4FDD;&#x8BC1; mongodb &#x662F;&#x542F;&#x52A8;&#x7684;
</code></pre><p>&#x73B0;&#x5728;&#x6765;&#x8FDB;&#x884C;&#x7AEF;&#x53E3;&#x6620;&#x5C04;</p>
<pre><code>server{
  listen     80;
  server_name api.haoqicat.com;

  location / {
      proxy_pass http://localhost:3003;
      proxy_set_header X-Forwarded-Proto $scheme;
      proxy_set_header Host $http_x_forwarded_host;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection &quot;upgrade&quot;;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_read_timeout 3m;
      proxy_send_timeout 3m;
  }
}
</code></pre><p>TIP:&#x5728;&#x5404;&#x4E2A; tmux &#x4F1A;&#x8BDD;&#x4E4B;&#x95F4;&#x8DF3;&#x8F6C;</p>
<p>ctrl+B+P //&#x8DF3;&#x8F6C;&#x5230;&#x4E0A;&#x4E00;&#x4E2A;</p>
<p>ctrl+B+N&#x3000;//&#x8DF3;&#x8F6C;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;</p>
<p>&#x8FD9;&#x6837;&#xFF0C;server &#x7AEF;&#x5C31;&#x542F;&#x52A8;&#x4E86;</p>
<h1 id="t9&#x94FE;&#x63A5;&#x524D;&#x540E;&#x7AEF;">&#x94FE;&#x63A5;&#x524D;&#x540E;&#x7AEF; <a href="#t9&#x94FE;&#x63A5;&#x524D;&#x540E;&#x7AEF;"> # </a></h1>
<p>&#x4FEE;&#x6539; settings.js &#x6587;&#x4EF6;&#xFF0C;&#x6700;&#x7EC8;&#x5185;&#x5BB9;&#x5982;&#x4E0B;</p>
<pre><code>const Settings = {
  host: &apos;http://api.haoqicat.com&apos;
}

export default Settings;
</code></pre><p>&#x91CD;&#x65B0;&#x6253;&#x5305; bundle.js</p>
<h3 id="t10&#x5927;&#x529F;&#x544A;&#x6210;">&#x5927;&#x529F;&#x544A;&#x6210; <a href="#t10&#x5927;&#x529F;&#x544A;&#x6210;"> # </a></h3>
<p>&#x8FD9;&#x6837;&#xFF0C;&#x524D;&#x540E;&#x7AEF;&#x5C31;&#x53EF;&#x4EE5;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#x4E86;&#x3002;</p>

        <div class="copyright">Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a>. Dependence <a href="https://nodejs.org">Node.js</a> run.</div>
    </div>

</div>


</body>
</html>
